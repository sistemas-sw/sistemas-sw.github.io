



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Práctica 2 - Prácticas de Implementación en Java</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#repaso-de-conceptos-teoricos" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Prácticas de Implementación en Java" aria-label="Prácticas de Implementación en Java" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Prácticas de Implementación en Java
            </span>
            <span class="md-header-nav__topic">
              
                Práctica 2
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/sistemas-sw/iiss-practicas-java/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    sistemas-sw/iiss-practicas-java
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Prácticas de Implementación en Java" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Prácticas de Implementación en Java
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/sistemas-sw/iiss-practicas-java/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    sistemas-sw/iiss-practicas-java
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Prácticas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Prácticas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      Programación orientada a objetos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Programación orientada a objetos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../oop-p1/" title="Práctica 1" class="md-nav__link">
      Práctica 1
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Práctica 2" class="md-nav__link md-nav__link--active">
      Práctica 2
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oop-p3/" title="Práctica 3" class="md-nav__link">
      Práctica 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oop-p4/" title="Práctica 4" class="md-nav__link">
      Práctica 4
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Programación funcional
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Programación funcional
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fp-p1/" title="Práctica 1" class="md-nav__link">
      Práctica 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fp-p2/" title="Práctica 2" class="md-nav__link">
      Práctica 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fp-p3/" title="Práctica 3" class="md-nav__link">
      Práctica 3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/sistemas-sw/iiss-practicas-java/edit/master/docs/oop-p2.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h0>Práctica 2: Refactoring</h0>
<h1 id="repaso-de-conceptos-teoricos"><span style="color:blue">Repaso de conceptos teóricos</span><a class="headerlink" href="#repaso-de-conceptos-teoricos" title="Permanent link">&para;</a></h1>
<h1 id="refactoring">Refactoring<a class="headerlink" href="#refactoring" title="Permanent link">&para;</a></h1>
<h2 id="definicion">Definición<a class="headerlink" href="#definicion" title="Permanent link">&para;</a></h2>
<p>El proceso de refactoring es un proceso sistemático, en el cual se pretende cambiar la estructura del software implementado para hacerlo más fácil de entender y más rápido de modificar sin cambiar su comportamiento. Es decir, en este proceso se pretende mejorar la calidad del código fuente sin crear nueva funcionalidad.</p>
<blockquote>
<p>Refactoring is a controlled technique for improving the design of an existing code base. Its essence is applying a series of small behavior-preserving transformations, each of which "too small to be worth doing". However the cumulative effect of each of these transformations is quite significant. By doing them in small steps you reduce the risk of introducing errors. You also avoid having the system broken while you are carrying out the restructuring — which allows you to gradually refactor a system over an extended period of time.</p>
<p>-- <cite><a href="https://www.amazon.es/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/ref=sr_1_fkmr0_1?__mk_es_ES=ÅMÅŽÕÑ&amp;dchild=1&amp;keywords=refactoring+improving+the+design+of+existing+code+first+edition&amp;qid=1584952603&amp;sr=8-1-fkmr0">Martin Fowler</a></cite></p>
</blockquote>
<p>Por lo tanto, en el proceso de refactorización se deben realizar pequeñas modificaciones, las cuales sean manejables y vayan incrementando gradualmente la limpieza de código mientras se mantiene la funcionalidad del mismo. Conforme se realizan estos cambios, se comienza a transformar el código inicial en un código más simple, más fácil de leer y más mantenible. No es una simple refactorización lo que realiza el cambio, si no el efecto acumulativo de muchos pequeños "refactorings" realizados hacía un sólo objetivo.</p>
<blockquote>
<p><img alt="modelos de ejecución" src="../figuras/incrementalchanges.png" /></p>
<p><small>por <cite>Justin Albano, <a href="https://dzone.com/articles/what-is-refactoring">What Is Refactoring?</a></cite></small></p>
</blockquote>
<h2 id="razones-para-refactorizar">Razones para refactorizar<a class="headerlink" href="#razones-para-refactorizar" title="Permanent link">&para;</a></h2>
<p>A continuación, según <a href="https://www.amazon.es/Code-Complete-Practical-Handbook-Construction/dp/B00CNKPY6K/ref=sr_1_1?__mk_es_ES=ÅMÅŽÕÑ&amp;dchild=1&amp;keywords=code+complete+second+edition&amp;qid=1584958289&amp;sr=8-1">[1]</a> se listan las posibles razones que promueven la refactorización del código:</p>
<ul>
<li>Código duplicado.</li>
<li>Una función es demasiado larga.</li>
<li>Un bucle es demasiado largo o está demasiado anidado (demasiada complejidad).</li>
<li>Una clase tiene poca cohesión.</li>
<li>Una interfaz no proporciona un nivel consistente de abstracción.</li>
<li>Una lista de parámetros tiene demasiados parámetros.</li>
<li>Los cambios dentro de una clase tienden a afectar a otras clases.</li>
<li>Las jerarquías de herencia tienen que ser modificadas en paralelo (afecta a todas las subclases un mismo cambio).</li>
<li>Los atributos que se utilizan por varias clases no están organizados en una clase (se repiten).</li>
<li>Una función utiliza más características propuestas por otra clase que de su propia clase.</li>
<li>Un tipo de datos primitivo esta sobrecargado.</li>
<li>Una clase no tiene una finalidad clara (no aporta mucho).</li>
<li>Un objeto intermediario no hace nada.</li>
<li>Una función tiene un nombre que no especifica de forma clara su objetivo.</li>
<li>Los atributos de una clase son públicos.</li>
<li>Una subclase sólo utiliza un porcentaje mínimo de las funciones que hereda.</li>
<li>Se utilizan comentarios para explicar código díficil de entender.</li>
<li>Se usan variables globales.</li>
<li>Una función contiene código que parece que será necesario algún día pero en la actualidad no se utiliza.</li>
</ul>
<h2 id="resumen-de-posibles-refactorizaciones">Resumen de posibles refactorizaciones<a class="headerlink" href="#resumen-de-posibles-refactorizaciones" title="Permanent link">&para;</a></h2>
<p>Finalmente, a continuación se incluye algunas de las posibles refactorizaciones propuestas en <a href="https://www.amazon.es/Code-Complete-Practical-Handbook-Construction/dp/B00CNKPY6K/ref=sr_1_1?__mk_es_ES=ÅMÅŽÕÑ&amp;dchild=1&amp;keywords=code+complete+second+edition&amp;qid=1584958289&amp;sr=8-1">[1]</a>. La aplicación de estas técnicas de refactorización dependerá de si en el softare implementado se encuentran alguno/s de los problemas incluidos en la lista anterior:</p>
<h3 id="refactorizacion-en-el-uso-de-datos">Refactorización en el uso de datos<a class="headerlink" href="#refactorizacion-en-el-uso-de-datos" title="Permanent link">&para;</a></h3>
<ul>
<li>Reemplazar un número utilizado directamente por una constante.</li>
<li>Renombrar una variable para darle un nombre más claro o explicativo.</li>
<li>Convertir una variable que se usa en múltiples sitios en múltiples variables de único uso.</li>
<li>Usar una variable local para propósitos locales en lugar de un parámetro de una función.</li>
<li>Convertir el uso de datos primitivos en el uso de una clase.</li>
<li>Convertir un array (de bajo nivel) en un objeto.</li>
<li>Encapsular una colección.</li>
</ul>
<h3 id="refactorizacion-en-la-implementacion-de-sentenciasinstrucciones">Refactorización en la implementación de sentencias/instrucciones<a class="headerlink" href="#refactorizacion-en-la-implementacion-de-sentenciasinstrucciones" title="Permanent link">&para;</a></h3>
<ul>
<li>Descomponer una expresión lógica.</li>
<li>Convertir una expresión lógica compleja en una función lógica con un nombre correcto para su definición.</li>
<li>Unificar fragmentos de código duplicado en diferentes partes de una expresión condicional.</li>
<li>Eliminar el uso de "break" o "return" en lugar del uso de variables de control en los bucles.</li>
<li>Devolver lo más rápido posible la solución en lugar de asignar el valor a una variable dentro de instrucciones if-else.</li>
<li>Reemplazar condicionales (especialmente las sentencias "case") por el uso de polimorfismo.</li>
</ul>
<h3 id="refactorizacion-en-la-implementacion-de-funciones">Refactorización en la implementación de funciones<a class="headerlink" href="#refactorizacion-en-la-implementacion-de-funciones" title="Permanent link">&para;</a></h3>
<ul>
<li>Extraer una función desde código que se repite en varios lugares.</li>
<li>Convertir una función demasiado larga en una clase.</li>
<li>Sustituir un algoritmo complejo por uno simple.</li>
<li>Combinar funciones similares en una única.</li>
<li>Pasar el objeto completo en lugar de seleccionar algunos campos específicos (en el caso de que sean muchos).</li>
<li>Pasar algunos campos específicos en lugar del objeto completo (en el caso de que sean pocos campos los utilizados).</li>
</ul>
<h3 id="refactorizacion-en-la-implementacion-de-clasesinterfaces">Refactorización en la implementación de clases/interfaces<a class="headerlink" href="#refactorizacion-en-la-implementacion-de-clasesinterfaces" title="Permanent link">&para;</a></h3>
<ul>
<li>Extraer código especializado en subclases.</li>
<li>Combinar código similar en superclases.</li>
<li>Mover una función a otra clase en la que tenga más coherencia.</li>
<li>Convertir una clase demasiado larga en dos.</li>
<li>Eliminar una clase sin utilidad.</li>
<li>Reemplazar herencia por composición (en el caso de que sea necesario).</li>
<li>Reemplazar composición por herencia (en el caso de que sea necesario).</li>
<li>Unificar una superclase y una subclase si su implementación es muy similar.</li>
</ul>
<h3 id="refactorizacion-a-nivel-de-sistema">Refactorización a nivel de sistema<a class="headerlink" href="#refactorizacion-a-nivel-de-sistema" title="Permanent link">&para;</a></h3>
<ul>
<li>Cambiar la asociación unidireccional de clases a bidireccional (en caso de que sea necesario).</li>
<li>Cambiar la asociación bidireccional de clases a unidireccional (en caso de que sea necesario).</li>
<li>Proveer de una factoria para crear los objetos en lugar de usar un constructor simple.</li>
<li>Reemplazar los códigos de error con excepciones (en caso de que sea necesario).</li>
</ul>
<h1 id="uso-de-streams-expresiones-lambda-en-java">Uso de Streams + expresiones Lambda en Java<a class="headerlink" href="#uso-de-streams-expresiones-lambda-en-java" title="Permanent link">&para;</a></h1>
<p>Un <em>stream</em> representa una secuencia de elementos que soportan diferentes tipos de operaciones que permiten realizar cálculos sobre ellos. Las posibles operaciones que se pueden realizar sobre un <em>stream</em> pueden ser intermediarias o terminales. Las operaciones intermediarias devuelven un nuevo <em>stream</em> permitiendo encadenar múltiples operaciones intermediarias sin usar punto y coma. Por otro lado, las operaciones terminales son nulas o devuelven un resultado de un tipo diferente, por ejemplo un tipo numérico.</p>
<blockquote>
<p><img alt="streams en Java 8" src="../figuras/streamEjemplo.png" /></p>
<p><small>por <cite>Benjamin, <a href="https://winterbe.com/posts/2014/07/31/java8-stream-tutorial-examples/">Java 8 Stream Tutorial</a></cite></small></p>
</blockquote>
<p>En el ejemplo anterior, las operaciones <em>filter</em>, <em>map</em> y <em>sorted</em> son operaciones intermediarias, mientras que la operación <em>forEach</em> es una operación terminal.</p>
<p>Más información: <a href="https://www.oracle.com/technetwork/es/articles/java/procesamiento-streams-java-se-8-2763402-esa.html">https://www.oracle.com/technetwork/es/articles/java/procesamiento-streams-java-se-8-2763402-esa.html</a></p>
<p>Por otro lado, se puede observar que la mayoría de las operaciones que se aplican sobre <em>streams</em> aceptan algún tipo de parámetro en forma de <em>expresión lambda</em>, la cual es una interfaz funcional que especifica el comportamiento exacto de la operación. Estas operaciones no pueden modificar el contenido del <em>stream</em> original. En el ejemplo anterior, se puede observar que ninguna de las operaciones modifica la variable <em>myList</em> añadiendo o eliminando elementos, sólo se realiza el filtrado de los elementos que no empiezan por "c", se transforman a mayúsculas, se ordenan en orden alfabético y se imprimen por pantalla.</p>
<p>Más información: <a href="https://www.oracle.com/technetwork/es/articles/java/expresiones-lambda-api-stream-java-2737544-esa.html">https://www.oracle.com/technetwork/es/articles/java/expresiones-lambda-api-stream-java-2737544-esa.html</a></p>
<h1 id="ejercicios-propuestos"><span style="color:blue">Ejercicios propuestos</span><a class="headerlink" href="#ejercicios-propuestos" title="Permanent link">&para;</a></h1>
<h2 id="ejercicio-1">Ejercicio 1<a class="headerlink" href="#ejercicio-1" title="Permanent link">&para;</a></h2>
<p>Dado los siguientes fragmentos de código responder a las siguientes preguntas:</p>
<h3 id="groupofusersjava">GroupOfUsers.java<a class="headerlink" href="#groupofusersjava" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GroupOfUsers</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">usersWithPoints</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{{</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User1&quot;</span><span class="p">,</span> <span class="mi">800</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User2&quot;</span><span class="p">,</span> <span class="mi">550</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User3&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User4&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="p">}};</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getUsers</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>

        <span class="c1">//Sorting users by points</span>
        <span class="n">usersWithPoints</span><span class="p">.</span><span class="na">entrySet</span><span class="p">()</span>
        <span class="p">.</span><span class="na">stream</span><span class="p">()</span>
        <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="n">comparingByValue</span><span class="p">().</span><span class="na">reversed</span><span class="p">())</span>
        <span class="p">.</span><span class="na">forEachOrdered</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">users</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">getKey</span><span class="p">()));</span>

        <span class="c1">//Capitalizing the names of the users</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">usersCapitalized</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">users</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">usersCapitalized</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">()));</span>

        <span class="k">return</span> <span class="n">usersCapitalized</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>

<h3 id="mainjava">Main.java<a class="headerlink" href="#mainjava" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">...</span>
    <span class="n">GroupOfUsers</span> <span class="n">group</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GroupOfUsers</span><span class="p">();</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">group</span><span class="p">.</span><span class="na">getUsers</span><span class="p">();</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;The users are: &quot;</span> <span class="o">+</span> <span class="n">users</span><span class="p">);</span>
<span class="p">...</span>
</code></pre></div>

<h3 id="preguntas-propuestas">Preguntas propuestas<a class="headerlink" href="#preguntas-propuestas" title="Permanent link">&para;</a></h3>
<p>En la siguiente lista se incluyen 10 posibles problemas que pueden encontrarse en el código de la implementación anterior:</p>
<ul>
<li>Código duplicado. </li>
<li>Funciones con nombre que no especifica de forma clara su objetivo. </li>
<li>Rutinas demasiado largas. </li>
<li>Bucles demasiado largos o demasiado anidados. </li>
<li>Funciones con demasiada responsabilidad (no tienen asignada una única responsabilidad u operación a resolver). </li>
<li>Lista de parámetros con demasiados parámetros. </li>
<li>Los cambios de una clase tienden a afectar a otras. </li>
<li>Se utilizan comentarios para explicar código díficil de entender. </li>
<li>Se usan variables globales. </li>
<li>Los cambios dentro de una clase tienden a afectar a otras clases.</li>
</ul>
<p>a) ¿Existe algún tipo de problema en la implementación anterior de los que se incluye en la lista anterior?, ¿es necesario aplicar refactoring en este caso?. En el caso de que existan problemas, indique cuáles son y qué tipos de problemas piensa que generarían en el futuro si no se aplica el refactoring ahora.</p>
<p>b) En el caso de que la implementación necesite la aplicación de refactoring, realice los cambios oportunos e indique las mejoras que aporta su implementación respecto a la original.</p>
<h2 id="ejercicio-2">Ejercicio 2<a class="headerlink" href="#ejercicio-2" title="Permanent link">&para;</a></h2>
<p>Dado los siguientes fragmentos de código responder a las siguientes preguntas:</p>
<h3 id="groupofusersjava_1">GroupOfUsers.java<a class="headerlink" href="#groupofusersjava_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GroupOfUsers</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">usersWithPoints_Group1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{{</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User1&quot;</span><span class="p">,</span> <span class="mi">800</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User2&quot;</span><span class="p">,</span> <span class="mi">550</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User3&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User4&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="p">}};</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">usersWithPoints_Group2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{{</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User1&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User2&quot;</span><span class="p">,</span> <span class="mi">990</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User3&quot;</span><span class="p">,</span> <span class="mi">760</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User4&quot;</span><span class="p">,</span> <span class="mi">230</span><span class="p">);</span>
    <span class="p">}};</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">usersWithPoints_Group3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{{</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User1&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User2&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User3&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
        <span class="n">put</span><span class="p">(</span><span class="s">&quot;User4&quot;</span><span class="p">,</span> <span class="mi">780</span><span class="p">);</span>
    <span class="p">}};</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="nf">getUsers</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">users1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">users2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">users3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="p">();</span>

        <span class="c1">//Sorting users by points</span>
        <span class="n">usersWithPoints_Group1</span><span class="p">.</span><span class="na">entrySet</span><span class="p">()</span>
        <span class="p">.</span><span class="na">stream</span><span class="p">()</span>
        <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="n">comparingByValue</span><span class="p">().</span><span class="na">reversed</span><span class="p">())</span>
        <span class="p">.</span><span class="na">forEachOrdered</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">users1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">getKey</span><span class="p">()));</span>

        <span class="n">usersWithPoints_Group2</span><span class="p">.</span><span class="na">entrySet</span><span class="p">()</span>
        <span class="p">.</span><span class="na">stream</span><span class="p">()</span>
        <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="n">comparingByValue</span><span class="p">().</span><span class="na">reversed</span><span class="p">())</span>
        <span class="p">.</span><span class="na">forEachOrdered</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">users2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">getKey</span><span class="p">()));</span>

        <span class="n">usersWithPoints_Group3</span><span class="p">.</span><span class="na">entrySet</span><span class="p">()</span>
        <span class="p">.</span><span class="na">stream</span><span class="p">()</span>
        <span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span><span class="n">comparingByValue</span><span class="p">().</span><span class="na">reversed</span><span class="p">())</span>
        <span class="p">.</span><span class="na">forEachOrdered</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">users3</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">getKey</span><span class="p">()));</span>

        <span class="c1">//Capitalizing the names of the users</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">usersCapitalized1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">usersCapitalized2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">usersCapitalized3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>

        <span class="n">users1</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">usersCapitalized1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">()));</span>
        <span class="n">users2</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">usersCapitalized2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">()));</span>
        <span class="n">users3</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">usersCapitalized3</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">()));</span>

        <span class="c1">//Adding users to the main list</span>
        <span class="n">users</span><span class="p">.</span><span class="na">add</span><span class="p">((</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">)</span><span class="n">usersCapitalized1</span><span class="p">);</span>
        <span class="n">users</span><span class="p">.</span><span class="na">add</span><span class="p">((</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">)</span><span class="n">usersCapitalized2</span><span class="p">);</span>
        <span class="n">users</span><span class="p">.</span><span class="na">add</span><span class="p">((</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">)</span><span class="n">usersCapitalized3</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">users</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>

<h3 id="mainjava_1">Main.java<a class="headerlink" href="#mainjava_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">...</span>
    <span class="n">GroupOfUsers</span> <span class="n">group</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GroupOfUsers</span><span class="p">();</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">group</span><span class="p">.</span><span class="na">getUsers</span><span class="p">();</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;The users are: &quot;</span> <span class="o">+</span> <span class="n">users</span><span class="p">);</span>
<span class="p">...</span>
</code></pre></div>

<h3 id="preguntas-propuestas_1">Preguntas propuestas<a class="headerlink" href="#preguntas-propuestas_1" title="Permanent link">&para;</a></h3>
<p>Responda a las siguientes cuestiones teniendo en cuenta la lista de los 10 posibles problemas incluida en el ejercicio anterior.</p>
<p>a) El software del ejercicio anterior ha evolucionado añadiendo nueva funcionalidad en su implementación. ¿Existe algún tipo de problema en esta versión de la implementación de los que se incluyen en la lista?, ¿es necesario aplicar refactoring en este caso?. En el caso de que existan problemas, indique cuáles son y qué tipos de problemas piensa que generarían en el futuro si no se aplica el refactoring ahora.</p>
<p>b) En el caso de que la implementación necesite la aplicación de refactoring, realice los cambios oportunos e indique las mejoras que aporta su implementación respecto a la original.</p>
<h1 id="referencias">Referencias<a class="headerlink" href="#referencias" title="Permanent link">&para;</a></h1>
<p><a href="https://www.amazon.es/Code-Complete-Practical-Handbook-Construction/dp/B00CNKPY6K/ref=sr_1_1?__mk_es_ES=ÅMÅŽÕÑ&amp;dchild=1&amp;keywords=code+complete+second+edition&amp;qid=1584958289&amp;sr=8-1">[1] Libro Code Complete: A Practical Handbook of Software Construction, Second Edition.</a></p>
<p><a href="https://dzone.com/articles/what-is-refactoring">[2] Blog What Is Refactoring.</a></p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../oop-p1/" title="Práctica 1" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Práctica 1
              </span>
            </div>
          </a>
        
        
          <a href="../oop-p3/" title="Práctica 3" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Práctica 3
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/sistemas-sw" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>