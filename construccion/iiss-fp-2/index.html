



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Apuntes de Implementación e Implantación de Sistemas Software – Grado en Ingeniería Informática">
      
      
      
        <meta name="author" content="Juan Manuel Dodero">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Lambdas - Implementación e Implantación de Sistemas Software</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#programacion-funcional" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Implementación e Implantación de Sistemas Software" aria-label="Implementación e Implantación de Sistemas Software" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Implementación e Implantación de Sistemas Software
            </span>
            <span class="md-header-nav__topic">
              
                Lambdas
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/sistemas-sw/construccion/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Implementación e Implantación de Sistemas Software" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Implementación e Implantación de Sistemas Software
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/sistemas-sw/construccion/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Asignatura
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Asignatura
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-pres/" title="Presentación" class="md-nav__link">
      Presentación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bibliografia/" title="Bibliografía" class="md-nav__link">
      Bibliografía
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../iiss-temas/" title="Temario" class="md-nav__link">
      Temario
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      I. Objetos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        I. Objetos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-oop-1/" title="Principios" class="md-nav__link">
      Principios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-oop-2/" title="Delegación" class="md-nav__link">
      Delegación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-oop-3/" title="Inyección" class="md-nav__link">
      Inyección
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-oop-4/" title="Duplicación" class="md-nav__link">
      Duplicación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-err/" title="Calidad" class="md-nav__link">
      Calidad
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../iiss-aop/" title="II. Aspectos" class="md-nav__link">
      II. Aspectos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../iiss-dbc/" title="III. Contratos" class="md-nav__link">
      III. Contratos
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      IV. Funciones
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        IV. Funciones
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-fp-1/" title="Interfaces funcionales" class="md-nav__link">
      Interfaces funcionales
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lambdas
      </label>
    
    <a href="./" title="Lambdas" class="md-nav__link md-nav__link--active">
      Lambdas
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#funciones-anonimas" class="md-nav__link">
    Funciones anónimas
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-o-lambdas" class="md-nav__link">
    Funciónes anónimas o lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-en-los-lenguajes" class="md-nav__link">
    Lambdas en los lenguajes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#java" class="md-nav__link">
    Java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ruby" class="md-nav__link">
    Ruby
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    C++
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cierres-de-funciones-o-closures" class="md-nav__link">
    Cierres de funciones o closures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-y-cierres-en-c" class="md-nav__link">
    Lambdas y cierres en C++
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-en-java" class="md-nav__link">
    Funciones anónimas en Java
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-de-variables-en-lambdas" class="md-nav__link">
    Captura de variables en lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-y-clases-anonimas-internas" class="md-nav__link">
    Lambdas y clases anónimas internas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-en-ruby" class="md-nav__link">
    Funciones anónimas en Ruby
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bloques-blocks" class="md-nav__link">
    Bloques (blocks)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejemplo-busqueda-en-una-lista" class="md-nav__link">
    Ejemplo: búsqueda en una lista
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejecucion-de-bloques" class="md-nav__link">
    Ejecución de bloques
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procs-y-lambdas" class="md-nav__link">
    Procs y lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-de-bloques-como-parametros" class="md-nav__link">
    Paso de bloques como parámetros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejemplo-de-interfaces-funcionales-formateo-de-informes" class="md-nav__link">
    Ejemplo de interfaces funcionales: Formateo de informes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-fp-3/" title="Mixins" class="md-nav__link">
      Mixins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      V. Eventos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        V. Eventos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-evp-1/" title="Listeners" class="md-nav__link">
      Listeners
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-evp-2/" title="Asíncronas" class="md-nav__link">
      Asíncronas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../iiss-evp-3/" title="Eventos" class="md-nav__link">
      Eventos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#funciones-anonimas" class="md-nav__link">
    Funciones anónimas
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-o-lambdas" class="md-nav__link">
    Funciónes anónimas o lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-en-los-lenguajes" class="md-nav__link">
    Lambdas en los lenguajes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#java" class="md-nav__link">
    Java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ruby" class="md-nav__link">
    Ruby
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    C++
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cierres-de-funciones-o-closures" class="md-nav__link">
    Cierres de funciones o closures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-y-cierres-en-c" class="md-nav__link">
    Lambdas y cierres en C++
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-en-java" class="md-nav__link">
    Funciones anónimas en Java
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-de-variables-en-lambdas" class="md-nav__link">
    Captura de variables en lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambdas-y-clases-anonimas-internas" class="md-nav__link">
    Lambdas y clases anónimas internas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funciones-anonimas-en-ruby" class="md-nav__link">
    Funciones anónimas en Ruby
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bloques-blocks" class="md-nav__link">
    Bloques (blocks)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejemplo-busqueda-en-una-lista" class="md-nav__link">
    Ejemplo: búsqueda en una lista
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejecucion-de-bloques" class="md-nav__link">
    Ejecución de bloques
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procs-y-lambdas" class="md-nav__link">
    Procs y lambdas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-de-bloques-como-parametros" class="md-nav__link">
    Paso de bloques como parámetros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejemplo-de-interfaces-funcionales-formateo-de-informes" class="md-nav__link">
    Ejemplo de interfaces funcionales: Formateo de informes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/sistemas-sw/construccion/edit/master/docs/iiss-fp-2.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h0>FUNCIONES</h0>
<h1 id="programacion-funcional">Programación funcional<a class="headerlink" href="#programacion-funcional" title="Permanent link">&para;</a></h1>
<h2 id="funciones-anonimas"><a id="anonimas">Funciones anónimas</a><a class="headerlink" href="#funciones-anonimas" title="Permanent link">&para;</a></h2>
<h3 id="funciones-anonimas-o-lambdas"><a id="lambda">Funciónes anónimas o <em>lambdas</em></a><a class="headerlink" href="#funciones-anonimas-o-lambdas" title="Permanent link">&para;</a></h3>
<ul>
<li>Función o subrutina definida y (posiblemente) llamada sin necesidad de asociarla a un identificador o nombre</li>
<li>Se suelen pasar como argumento a funciones de orden superior</li>
<li>Son funciones anidadas que permiten acceder a variables definidas en el ámbito de la contenedora (variables no locales a la función anónima)</li>
<li>Muchos lenguajes las introducen a través de la palabra reservada <code>lambda</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Expresión lambda</p>
<p>Una expresión <em>lambda</em> es una función anónima (con o sin parámetros) que es llamada sin necesidad de asociarle un nombre explícito. Sirven para pasarlas como argumento a funciones de orden superior, momento en el cual los parámetros de la función anónima toman un valor en el contexto de ejecución de la función contenedora que la recibe y ejecuta. Por tanto, las funciones anónimas permiten acceder a variables (no locales) definidas en el ámbito de la contenedora.</p>
</div>
<h3 id="lambdas-en-los-lenguajes">Lambdas en los lenguajes<a class="headerlink" href="#lambdas-en-los-lenguajes" title="Permanent link">&para;</a></h3>
<p>Mecanismos de los lenguajes para implementar funciones anónimas:</p>
<ul>
<li>En C++: funciones anónimas, objetos función (<em>functors</em>) o <a href="http://en.cppreference.com/w/cpp/language/lambda">funciones lambda</a> (desde C++11)</li>
<li>En Java 8: <a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html">expresiones lambda</a></li>
<li>En Ruby: <a href="https://www.blackbytes.info/2016/02/ruby-procs-and-lambdas/">blocks, procs y lambdas</a></li>
<li>En C#: <a href="https://msdn.microsoft.com/en-us/library/ms173171.aspx">delegates</a> (métodos anónimos y expresiones lambda)</li>
<li>En Python: <a href="https://docs.python.org/2/howto/functional.html">generators, comprehensions, lambda expressions</a></li>
</ul>
<h4 id="java">Java<a class="headerlink" href="#java" title="Permanent link">&para;</a></h4>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Sintaxis</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>  <span class="p">(</span> <span class="n">argumentos</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">expresión</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Ejemplos</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>  <span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
  <span class="p">()</span> <span class="o">-&gt;</span> <span class="mi">42</span>
  <span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span> <span class="p">}</span>
</code></pre></div>

<h4 id="ruby">Ruby<a class="headerlink" href="#ruby" title="Permanent link">&para;</a></h4>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">Blocks</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>  <span class="p">{</span> <span class="o">|</span> <span class="n">argumentos</span> <span class="o">|</span> <span class="n">expresión</span> <span class="p">}</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">Lambdas</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>  <span class="o">-&gt;</span><span class="p">(</span><span class="n">argumentos</span><span class="p">)</span> <span class="p">{</span> <span class="n">expresión</span> <span class="p">}</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">Ejemplos</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>  <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">num</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
  <span class="c1"># 2 4 6</span>

  <span class="n">times_two</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
  <span class="n">times_two</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="c1"># 20</span>
</code></pre></div>

<h4 id="c">C++<a class="headerlink" href="#c" title="Permanent link">&para;</a></h4>
<div class="tabbed-set" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">Sintaxis</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">capture</span><span class="p">](</span><span class="n">parameters</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">return_type</span> <span class="p">{</span> <span class="n">function_body</span> <span class="p">}</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">Entorno de referencia</label><div class="tabbed-content"></div>
</div>
<table>
<thead>
<tr>
<th>Capture</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[]</code></td>
<td>Sin variables externas definidas. Intentar utilizar cualquier variable externa es un error</td>
</tr>
<tr>
<td><code>[x, &amp;y]</code></td>
<td><code>x</code> se captura por valor, <code>y</code> por referencia</td>
</tr>
<tr>
<td><code>[&amp;]</code></td>
<td>Todas las variables externas que sean utilizadas son capturadas implícitamente por referencia</td>
</tr>
<tr>
<td><code>[=]</code></td>
<td>Todas las variable externas que sean utilizadas son capturadas implícitamente por valor</td>
</tr>
<tr>
<td><code>[&amp;, x]</code></td>
<td><code>x</code> se captura explícitamente por valor; el resto, por referencia</td>
</tr>
<tr>
<td><code>[=, &amp;z]</code></td>
<td><code>z</code> se captura explícitamente por referencia; el resto, por valor</td>
</tr>
</tbody>
</table>
<h3 id="cierres-de-funciones-o-closures"><a id="cierres">Cierres de funciones o <em>closures</em></a><a class="headerlink" href="#cierres-de-funciones-o-closures" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Cierre</strong>: Función o referencia a función junto con un <em>entorno de referencia</em><ul>
<li>La diferencia entre una función normal y un cierre es que un cierre depende de una o varias <strong>variables libres</strong>.</li>
<li>Un cierre permite acceder a las variables libres incluso cuando se invoca desde fuera de su ámbito léxico</li>
</ul>
</li>
<li><strong>Entorno de referencia</strong>: tabla que guarda una referencia a cada una de las variables no locales (<em>libres</em>) de la función<ul>
<li><strong>Variable libre</strong> (<em>free</em>): notación lógica matemática que especifica los lugares de una expresión donde tiene lugar una sustitución</li>
<li><strong>Variable asignada</strong> (<em>bound</em>): variable que era libre previamente pero a la que le ha sido asignado un valor o conjunto de valores</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Closures en Scala</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Seguir el tutorial sobre <a href="https://madusudanan.com/blog/scala-tutorials-part-30-closures/">Closures</a></li>
</ul>
</div>
<h3 id="lambdas-y-cierres-en-c">Lambdas y cierres en C++<a class="headerlink" href="#lambdas-y-cierres-en-c" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">some_list</span><span class="p">;</span> <span class="c1">// assume that contains something</span>
<span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="n">some_list</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">for_each</span><span class="p">(</span>
  <span class="n">begin</span><span class="p">(</span><span class="n">some_list</span><span class="p">),</span>
  <span class="n">end</span><span class="p">(</span><span class="n">some_list</span><span class="p">),</span>
  <span class="p">[</span><span class="o">&amp;</span><span class="n">total</span><span class="p">](</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">total</span> <span class="o">+=</span> <span class="n">x</span><span class="p">;</span> <span class="p">}</span>
<span class="p">);</span>
<span class="c1">// Computes the total of all elements in the list.</span>
<span class="cm">/* Variable total is stored as a part of the lambda function&#39;s closure.</span>
<span class="cm">   Since it is a reference to the stack variable total, it can change</span>
<span class="cm">   its value. */</span>
</code></pre></div>

<ul>
<li>Un <em>cierre</em> en C++ se expresa mediante la parte [<em>capture</em>]</li>
<li>El <em>entorno de referencia</em> se expresa por el conjunto de variables externas indicadas dentro del cierre</li>
<li>Las variables del entorno de referencia en C++ pueden ser capturadas por valor (<code>[=]</code>) o por referencia (<code>[&amp;]</code>)</li>
<li>Las variables externas capturadas son inmutables por defecto; si no, usar <code>mutable</code> después de los (<em>parameters</em>)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Lectura: Lambdas en C++</p>
<p>Lecturas recomendadas </p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> <a href="https://www.cprogramming.com/c++11/c++11-lambda-closures.html">Lambda Functions in C++11 - the Definitive Guide</a></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> La historia de las lambdas en C++: <a href="https://www.bfilipek.com/2019/02/lambdas-story-part1.html">Parte 1</a> y <a href="https://www.bfilipek.com/2019/03/lambdas-story-part2.html">Parte 2</a></li>
</ul>
</div>
<h3 id="funciones-anonimas-en-java">Funciones anónimas en Java<a class="headerlink" href="#funciones-anonimas-en-java" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">Clases anónimas (Java 7)</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ComparatorTest</span> <span class="p">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">personList</span> <span class="o">=</span> <span class="n">Person</span><span class="p">.</span><span class="na">createShortList</span><span class="p">();</span>

    <span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">personList</span><span class="p">,</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">(){</span>
      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Person</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Person</span> <span class="n">p2</span><span class="p">){</span>
<span class="hll">        <span class="k">return</span> <span class="n">p1</span><span class="p">.</span><span class="na">getLastname</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="na">getLastname</span><span class="p">());</span>
</span>      <span class="p">}</span>
    <span class="p">});</span>

    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=== Sorted Asc Lastname ===&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">:</span><span class="n">personList</span><span class="p">){</span>
      <span class="n">p</span><span class="p">.</span><span class="na">printName</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">personList</span><span class="p">,</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">(){</span>
      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Person</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Person</span> <span class="n">p2</span><span class="p">){</span>
<span class="hll">        <span class="k">return</span> <span class="n">p2</span><span class="p">.</span><span class="na">getLastname</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="na">getLastname</span><span class="p">());</span>
</span>      <span class="p">}</span>
    <span class="p">});</span>

    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=== Sorted Desc Lastname ===&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">:</span><span class="n">personList</span><span class="p">){</span>
      <span class="n">p</span><span class="p">.</span><span class="na">printName</span><span class="p">();</span>
    <span class="p">}</span>


  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">Lambdas (Java 8)</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ComparatorTest</span> <span class="p">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">personList</span> <span class="o">=</span> <span class="n">Person</span><span class="p">.</span><span class="na">createShortList</span><span class="p">();</span>

    <span class="c1">// Print Asc</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=== Sorted Asc Lastname ===&quot;</span><span class="p">);</span>
    <span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">personList</span><span class="p">,</span> <span class="p">(</span><span class="n">Person</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Person</span> <span class="n">p2</span><span class="p">)</span> <span class="o">-&gt;</span>
      <span class="n">p1</span><span class="p">.</span><span class="na">getLastname</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="na">getLastname</span><span class="p">()));</span>

    <span class="k">for</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">:</span><span class="n">personList</span><span class="p">){</span>
      <span class="n">p</span><span class="p">.</span><span class="na">printName</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Print Desc</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=== Sorted Desc Lastname ===&quot;</span><span class="p">);</span>
    <span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">personList</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span>  <span class="n">p2</span><span class="p">)</span> <span class="o">-&gt;</span>
      <span class="n">p2</span><span class="p">.</span><span class="na">getLastname</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="na">getLastname</span><span class="p">()));</span>

    <span class="k">for</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">:</span><span class="n">personList</span><span class="p">){</span>
      <span class="n">p</span><span class="p">.</span><span class="na">printName</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Ejercicio</p>
<p><a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html#section3">Mejorando código con expresiones lambda</a></p>
</div>
<h4 id="captura-de-variables-en-lambdas">Captura de variables en lambdas<a class="headerlink" href="#captura-de-variables-en-lambdas" title="Permanent link">&para;</a></h4>
<p>Una expresión lambda en Java puede <strong>capturar</strong> (o no) variables de instancia no locales (atributos de la clase contenedora) y variables locales (declaradas o no <code>final</code>, pero cuyo valor no es modificado) del ámbito contenedor.</p>
<ul>
<li>
<p>Ejemplo: Lambda que captura variables locales <code>final</code>:
<div class="highlight"><pre><span></span><code><span class="kd">final</span> <span class="n">BigDecimal</span> <span class="n">bd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">BigDecimal</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">Function</span><span class="o">&lt;</span><span class="n">BigDecimal</span><span class="p">,</span> <span class="n">BigDecimal</span><span class="o">&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bd</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">999999999</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">func</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="n">j</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
<li>
<p>Ejemplo: Lambda que captura variables locales no declaradas <code>final</code> pero cuyo valor no es modificado:
<div class="highlight"><pre><span></span><code><span class="n">BigDecimal</span> <span class="n">bd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">BigDecimal</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
 <span class="c1">// Se puede consultar x pero no se podría cambiar el valor de x:</span>
<span class="n">Function</span><span class="o">&lt;</span><span class="n">BigDecimal</span><span class="p">,</span> <span class="n">BigDecimal</span><span class="o">&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">bd</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="cm">/* x = new BigDecimal(0); */</span> <span class="p">};</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">999999999</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">func</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="n">j</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
<li>
<p>Ejemplo: Lambda que captura variables de instancia de la clase contenedora:
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LambdaInstanceCapturing</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">BigDecimal</span> <span class="n">bd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Function</span><span class="o">&lt;</span><span class="n">BigDecimal</span><span class="p">,</span> <span class="n">BigDecimal</span><span class="o">&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bd</span><span class="p">.</span><span class="na">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">999999999</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">func</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="n">j</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
</ul>
<h4 id="lambdas-y-clases-anonimas-internas">Lambdas y clases anónimas internas<a class="headerlink" href="#lambdas-y-clases-anonimas-internas" title="Permanent link">&para;</a></h4>
<p>En Java, una expresión lambda y una clase anónima interna (<em>inner class</em>) tienen un propósito similar, pero son diferentes en un aspecto: el <strong>ámbito</strong> (<em>scope</em>) de la definición de las variables locales.</p>
<p>Cuando se usa una inner class, se crea un nuevo ámbito para dicha clase. Se pueden ocultar las variables locales para el ámbito contenedor instanciando nuevas variables con el mismo nombre. También se puede usar la palabra reservada <code>this</code> dentro de una clase anónima para hacer referencia a su instancia.</p>
<p>Sin embargo, las expresiones lambda trabajan con el ámbito contenedor. No se pueden ocultar las variables del ámbito contenedor dentro del cuerpo de la expresión lambda. En tal caso, la palabra reservada <code>this</code> hace referencia a una instancia de la clase contenedora.</p>
<p>En el ejemplo siguiente, ¿qué valor devuelve <code>scopeExperiment()</code>?:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ClaseFuncional</span><span class="p">{</span>
  <span class="n">String</span> <span class="nf">method</span><span class="p">(</span><span class="n">String</span> <span class="n">string</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="n">String</span> <span class="n">variable</span> <span class="o">=</span> <span class="s">&quot;Valor de la contenedora&quot;</span><span class="p">;</span>

<span class="c1">//...</span>

<span class="kd">public</span> <span class="n">String</span> <span class="nf">scopeExperiment</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">ClaseFuncional</span> <span class="n">unaInnerClass</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClaseFuncional</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">String</span> <span class="n">variable</span> <span class="o">=</span> <span class="s">&quot;Valor de la inner class&quot;</span><span class="p">;</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">String</span> <span class="nf">method</span><span class="p">(</span><span class="n">String</span> <span class="n">string</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">variable</span><span class="p">;</span>
            <span class="cm">/*  Con o sin this, no hay lambdas ni variables libres */</span>
      <span class="p">}</span>
  <span class="p">};</span>
  <span class="n">String</span> <span class="n">resultadoInnerClass</span> <span class="o">=</span> <span class="n">unaInnerClass</span><span class="p">.</span><span class="na">method</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>

  <span class="n">ClaseFuncional</span> <span class="n">unaLambda</span> <span class="o">=</span> <span class="n">parametro</span> <span class="o">-&gt;</span> <span class="p">{</span>
      <span class="n">String</span> <span class="n">variable</span><span class="o">=</span> <span class="s">&quot;Valor de la lambda&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">variable</span><span class="p">;</span> 
        <span class="cm">/* Con this, el cierre de la variable libre se produce</span>
<span class="cm">           con el valor de ClaseFuncional::variable */</span>
  <span class="p">};</span>
  <span class="n">String</span> <span class="n">resultadoLambda</span> <span class="o">=</span> <span class="n">unaLambda</span><span class="p">.</span><span class="na">method</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="s">&quot;resultadoInnerClass = &quot;</span> <span class="o">+</span> <span class="n">resultadoInnerClass</span> <span class="o">+</span>
    <span class="s">&quot;,\nresultadoLambda = &quot;</span> <span class="o">+</span> <span class="n">resultadoLambda</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>El valor será:</p>
<div class="highlight"><pre><span></span><code>resultadoInnerClass  = Valor de la inner class,
resultadoLambda = Valor de la contenedora
</code></pre></div>

<h3 id="funciones-anonimas-en-ruby">Funciones anónimas en Ruby<a class="headerlink" href="#funciones-anonimas-en-ruby" title="Permanent link">&para;</a></h3>
<h4 id="bloques-blocks"><a id="blocks">Bloques (<em>blocks</em>)</a><a class="headerlink" href="#bloques-blocks" title="Permanent link">&para;</a></h4>
<div class="tabbed-set" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">Sintaxis `do` ... `end`</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span> <span class="o">]</span>
<span class="n">some_list</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">Sintaxis `{` ... `}`</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span> <span class="o">]</span>
<span class="n">some_list</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
</code></pre></div>

<p>El método <code>map</code> itera y aplica un bloque repetitivamente a cada elemento de una colección (representado por el parámetro <code>i</code>)</p>
<h5 id="ejemplo-busqueda-en-una-lista">Ejemplo: búsqueda en una lista<a class="headerlink" href="#ejemplo-busqueda-en-una-lista" title="Permanent link">&para;</a></h5>
<div class="tabbed-set" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">Sin bloques:</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SongList</span>
  <span class="k">def</span> <span class="nf">with_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="vi">@songs</span><span class="o">.</span><span class="n">length</span>
      <span class="k">return</span> <span class="vi">@songs</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="vi">@songs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="n">name</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">Con bloques (sintaxis `do` ... `end`):</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SongList</span>
  <span class="k">def</span> <span class="nf">with_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="vi">@songs</span><span class="o">.</span><span class="n">find</span> <span class="k">do</span> <span class="o">|</span><span class="n">song</span><span class="o">|</span>
      <span class="n">title</span> <span class="o">==</span> <span class="n">song</span><span class="o">.</span><span class="n">name</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

<div class="tabbed-set" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">Con bloques (sintaxis `{` ... `}`):</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SongList</span>
  <span class="k">def</span> <span class="nf">with_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="vi">@songs</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">song</span><span class="o">|</span> <span class="n">title</span> <span class="o">==</span> <span class="n">song</span><span class="o">.</span><span class="n">name</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

<p>El método <code>find</code> itera y aplica el test del bloque a cada elemento <code>song</code> de la colección.</p>
<h5 id="ejecucion-de-bloques">Ejecución de bloques<a class="headerlink" href="#ejecucion-de-bloques" title="Permanent link">&para;</a></h5>
<ul>
<li>El bloque debe aparecer al lado de una llamada a método</li>
<li>No se ejecuta el bloque, sino que se recuerda el contexto (variables locales, objeto actual, etc.) en que aparece</li>
<li>Cuando se ejecuta el método, el bloque es invocado donde aparezca <code>yield</code></li>
<li>El control vuelve al método después del <code>yield</code></li>
<li>Al bloque se le pueden pasar parámetros</li>
</ul>
<p><strong>Ejemplo: fibonacci</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fib_up_to</span><span class="p">(</span><span class="n">max</span><span class="p">)</span>
  <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
  <span class="k">while</span> <span class="n">i1</span> <span class="o">&lt;=</span> <span class="n">max</span>
    <span class="k">yield</span> <span class="n">i1</span>
    <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i1</span><span class="o">+</span><span class="n">i2</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="n">fib_up_to</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="nb">print</span> <span class="n">f</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">}</span>

<span class="c1">#Salida =&gt; 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987</span>
</code></pre></div>

<p><strong>Ejemplo de <code>yield</code>:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">three_times</span>
  <span class="k">yield</span>
  <span class="k">yield</span>
  <span class="k">yield</span>
<span class="k">end</span>
<span class="n">three_times</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;Hello&quot;</span> <span class="p">}</span>
</code></pre></div>

<p><strong>Ejemplo: implementación de <code>Array.find</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">find</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="n">size</span>
      <span class="n">value</span> <span class="o">=</span> <span class="nb">self</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
      <span class="k">return</span> <span class="n">value</span> <span class="k">if</span> <span class="k">yield</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

<p><strong>Ejemplos: iterar con bloques</strong></p>
<ul>
<li>Iterar sobre un array con <code>each</code></li>
</ul>
<p><code>Array#each</code>: recibe un array y aplica el bloque a cada item, sin modificar el array ni crear un nuevo objeto; devuelve el mismo array.</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span> <span class="o">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">printf</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">}</span>
<span class="c1">#Salida =&gt; 1 3 5 7 9</span>
<span class="nb">Array</span> <span class="n">a</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="o">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="p">}</span>
<span class="c1">#Salida =&gt; 2 4 6 8</span>
<span class="c1">#Devuelve =&gt; [1, 2, 3, 4]</span>
<span class="n">a</span>
<span class="c1">#Devuelve =&gt; [1, 2, 3, 4]</span>
</code></pre></div>

<ul>
<li>Iterar sobre un fichero con <code>each</code></li>
</ul>
<p><code>File#each</code>: recibe el contenido de un fichero de texto y aplica el bloque a cada línea.</p>
<div class="highlight"><pre><span></span><code><span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;testfile&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">line</span>
<span class="k">end</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span>
<span class="n">f</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;testfile&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">line</span><span class="p">}</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span>
</code></pre></div>

<ul>
<li>Iterar sobre un array con <code>collect</code></li>
</ul>
<p><code>Array#collect</code>: aplica el bloque a todos los items y devuelve el nuevo array modificado; hace lo mismo que <code>Array#map</code></p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;L&quot;</span><span class="o">].</span><span class="n">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span><span class="o">.</span><span class="n">succ</span> <span class="p">}</span>
<span class="c1"># Salida =&gt; [&#39;&#39;I&#39;&#39;, &#39;&#39;B&#39;&#39;, &#39;&#39;M&#39;&#39;]</span>
<span class="nb">Array</span> <span class="n">a</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="o">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">}</span>
<span class="c1">#Salida =&gt; 2 4 6 8</span>
<span class="c1">#Devuelve =&gt; [nil, nil, nil, nil]</span>
<span class="n">a</span><span class="o">.</span><span class="n">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="o">.</span><span class="n">succ</span><span class="p">}</span>
<span class="c1">#Devuelve =&gt; [2, 3, 4, 5]</span>
<span class="n">a</span>
<span class="c1">#Devuelve =&gt; [1, 2, 3, 4]</span>
</code></pre></div>

<h4 id="procs-y-lambdas"><a id="proc">Procs y lambdas</a><a class="headerlink" href="#procs-y-lambdas" title="Permanent link">&para;</a></h4>
<ul>
<li>En Ruby, una función anónima o <em>lambda</em> es simplemente un tipo especial de objeto <code>Proc</code></li>
<li>Definición de procs/lambdas:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># sin argumentos:</span>
<span class="n">say_something</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;This is a lambda&quot;</span> <span class="p">}</span>
<span class="n">say_something</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;This is a lambda&quot;</span> <span class="p">}</span>
<span class="n">say_otherwise</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;This is a proc&quot;</span> <span class="p">}</span>
<span class="c1"># con argumentos:</span>
<span class="n">times_two</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
</code></pre></div>

<ul>
<li>Varias formas de llamar a la lambda (es preferible <code>call</code>)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">say_something</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;This is a lambda&quot;</span> <span class="p">}</span>
<span class="n">say_something</span><span class="o">.</span><span class="n">call</span>
<span class="n">say_something</span><span class="o">.</span><span class="p">()</span>
<span class="n">say_something</span><span class="o">[]</span>

<span class="n">say_otherwise</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;This is a proc&quot;</span> <span class="p">}</span>
<span class="n">say_otherwise</span><span class="o">.</span><span class="n">call</span>

<span class="n">times_two</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
<span class="n">times_two</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>

<ul>
<li>Los <code>proc</code> no se preocupan de los argumentos:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">&quot;I don&#39;t care about args!&quot;</span> <span class="p">}</span>
<span class="n">t</span><span class="o">.</span><span class="n">call</span> <span class="c1">#Salida: I don&#39;t care about args!</span>
<span class="n">t</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#Salida: I don&#39;t care about args!</span>
<span class="n">t</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#Salida: I don&#39;t care about args!</span>
<span class="n">t</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#Salida: I don&#39;t care about args!</span>

<span class="n">s</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">&quot;I care about args&quot;</span> <span class="p">}</span>
<span class="n">s</span><span class="o">.</span><span class="n">call</span> <span class="c1"># ArgumentError: wrong number of arguments (given 0, expected 2)</span>
<span class="n">s</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># ArgumentError: wrong number of arguments (given 1, expected 2)</span>
<span class="n">s</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># Salida: I care about args</span>
</code></pre></div>

<ul>
<li>Los <code>proc</code> retornan del método actual; los lambda retornan de la función anónima:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># funciona:</span>
<span class="n">my_lambda</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span> <span class="p">}</span>
<span class="nb">puts</span> <span class="s2">&quot;Lambda result: </span><span class="si">#{</span><span class="n">my_lambda</span><span class="o">.</span><span class="n">call</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># eleva una exceción:</span>
<span class="n">my_proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span> <span class="p">}</span>
<span class="nb">puts</span> <span class="s2">&quot;Proc result: </span><span class="si">#{</span><span class="n">my_proc</span><span class="o">.</span><span class="n">call</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<ul>
<li>Si el <code>proc</code> está dentro de un método, la llamada a <code>return</code> es equivalente a retornar de ese método:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">call_proc</span>
  <span class="nb">puts</span> <span class="s2">&quot;Before proc&quot;</span>
  <span class="n">my_proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">2</span> <span class="p">}</span>
  <span class="n">my_proc</span><span class="o">.</span><span class="n">call</span>
  <span class="nb">puts</span> <span class="s2">&quot;After proc&quot;</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="n">call_proc</span>
<span class="c1"># Prints &quot;Before proc&quot; but not &quot;After proc&quot;</span>

<span class="k">def</span> <span class="nf">call_lambda</span>
  <span class="nb">puts</span> <span class="s2">&quot;Before lambda&quot;</span>
  <span class="n">my_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">2</span> <span class="p">}</span>
  <span class="n">my_lambda</span><span class="o">.</span><span class="n">call</span>
  <span class="nb">puts</span> <span class="s2">&quot;After lambda&quot;</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="n">call_lambda</span>
<span class="c1"># Prints &quot;Before lambda&quot; and &quot;After lambda&quot;</span>
</code></pre></div>

<p><strong>Diferencias entre <code>Proc</code> y <code>lambda</code>:</strong></p>
<ul>
<li>Las lambdas se definen con <code>-&gt; {}</code> y los procs con <code>Proc.new {}</code></li>
<li>Los <code>Proc</code> retornan del método actual, las lambdas retornan de la propia función lambda</li>
<li>Los <code>Proc</code> no se preocupan del número correcto de argumentos, las lambdas elevan una excepción</li>
</ul>
<h4 id="paso-de-bloques-como-parametros">Paso de bloques como parámetros<a class="headerlink" href="#paso-de-bloques-como-parametros" title="Permanent link">&para;</a></h4>
<ul>
<li>Simplemente, se añade al final de la llamada a un método </li>
<li>¿Dónde se llama al bloque? Donde el método indique con <code>yield</code></li>
<li>El bloque (realmente un objeto <code>Proc</code>) se pasa como una especie de parámetro no declarado</li>
</ul>
<p><strong>Ejemplos de paso de bloques:</strong></p>
<ul>
<li>Llamada a un bloque sin parámetros</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_it</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;Before the yield&quot;</span><span class="p">)</span>
  <span class="k">yield</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;After the yield&quot;</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">run_it</span> <span class="k">do</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Coming to you from inside the block&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># Salida =&gt;</span>
<span class="c1">#  Before the yield</span>
<span class="c1">#  Hello</span>
<span class="c1">#  Coming to you from inside the block</span>
<span class="c1">#  After the yield</span>
</code></pre></div>

<ul>
<li>Cualquier método puede recibir un bloque como parámetro implícito, pero no lo ejecuta si no hace <code>yield</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_it</span>
<span class="k">end</span>

<span class="n">run_it</span> <span class="k">do</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># =&gt; No genera salida</span>
</code></pre></div>

<ul>
<li>Con <code>yield</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_it</span>
  <span class="k">yield</span> <span class="k">if</span> <span class="nb">block_given?</span>
<span class="k">end</span>

<span class="n">run_it</span> <span class="k">do</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c1"># Salida =&gt;</span>
<span class="c1">#   Hello</span>
</code></pre></div>

<ul>
<li>Llamada a un bloque con parámetros:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_it_with_parameter</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Before the yield&#39;</span><span class="p">)</span>
  <span class="k">yield</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;After the yield&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">run_it_with_parameter</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Hello from inside the proc&#39;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;The value of x is </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># Salida =&gt;</span>
<span class="c1">#  Before the yield</span>
<span class="c1">#  Hello from inside the proc</span>
<span class="c1">#  The value of x is 24</span>
<span class="c1">#  After the yield</span>
</code></pre></div>

<ul>
<li>Hacer explícito el bloque pasado como parámetro usando <em>ampersand</em>: explicitamos que se espera que el método reciba un parámetro de tipo bloque</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_it_with_parameter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;Before the call&#39;</span><span class="p">)</span>
  <span class="n">block</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;After the call&#39;</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>

<ul>
<li>Convertir un <code>Proc</code> o un lambda en un bloque pasado como parámetro:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">my_proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;The value of x is </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)}</span>
<span class="n">run_it_with_parameter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_proc</span><span class="p">)</span>
<span class="n">my_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;The value of x is </span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)}</span>
<span class="n">run_it_with_parameter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_lambda</span><span class="p">)</span>

<span class="c1"># Salida (en ambos casos) =&gt;</span>
<span class="c1">#  Before the call</span>
<span class="c1">#  The value of x is 24</span>
<span class="c1">#  After the call</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Lecturas recomendadas</p>
<ul>
<li>M. Williams: <a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html">Java SE 8: Lambda Quick Start</a>, Oracle Learning Library, 2013.</li>
<li>D. Thomas &amp; A. Hunt: <a href="http://www.ruby-doc.org/docs/ProgrammingRuby/">Programming Ruby. The Pragmatic Programmer's Guide</a>, Addison-Wesley, 2005.</li>
</ul>
</div>
<p><a id="informes"></a></p>
<h4 id="ejemplo-de-interfaces-funcionales-formateo-de-informes">Ejemplo de interfaces funcionales: Formateo de informes<a class="headerlink" href="#ejemplo-de-interfaces-funcionales-formateo-de-informes" title="Permanent link">&para;</a></h4>
<p><strong>Versión en ruby</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Report</span>
  <span class="kp">attr_reader</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:text</span>
  <span class="kp">attr_accessor</span> <span class="ss">:formatter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s1">&#39;Informe mensual&#39;</span>
    <span class="vi">@text</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Todo marcha&#39;</span><span class="p">,</span> <span class="s1">&#39;muy bien.&#39;</span><span class="o">]</span>
    <span class="vi">@formatter</span> <span class="o">=</span> <span class="n">formatter</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">output_report</span><span class="p">()</span>
    <span class="vi">@formatter</span><span class="o">.</span><span class="n">output_report</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">class</span> <span class="nc">HTMLFormatter</span>
  <span class="k">def</span> <span class="nf">output_report</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&#39;</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;head&gt;&#39;</span><span class="p">)</span>
    <span class="c1"># Output The rest of the report ...</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot; &lt;title&gt;</span><span class="si">#{</span><span class="n">context</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&lt;/title&gt;&quot;</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;/head&gt;&#39;</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;body&gt;&#39;</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
      <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot; &lt;p&gt;</span><span class="si">#{</span><span class="n">line</span><span class="si">}</span><span class="s2">&lt;/p&gt;&quot;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;/body&gt;&#39;</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;&lt;/html&gt;&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">PlainTextFormatter</span>
  <span class="k">def</span> <span class="nf">output_report</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;***** </span><span class="si">#{</span><span class="n">context</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> *****&quot;</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
</code></pre></div>

<p><strong>Versión con interfaces funcionales (Ruby procs + blocks)</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Report</span>
  <span class="kp">attr_reader</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:text</span>
  <span class="kp">attr_accessor</span> <span class="ss">:formatter</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">formatter</span><span class="p">)</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s1">&#39;Monthly Report&#39;</span>
    <span class="vi">@text</span> <span class="o">=</span> <span class="o">[</span> <span class="s1">&#39;Things are going&#39;</span><span class="p">,</span> <span class="s1">&#39;really, really well.&#39;</span> <span class="o">]</span>
    <span class="vi">@formatter</span> <span class="o">=</span> <span class="n">formatter</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">output_report</span>
    <span class="vi">@formatter</span><span class="o">.</span><span class="n">call</span><span class="p">(</span> <span class="nb">self</span> <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

<p><strong>Formateo HTML</strong></p>
<div class="highlight"><pre><span></span><code><span class="no">HTML_FORMATTER</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">context</span><span class="o">|</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&#39;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;head&gt;&#39;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;   &lt;title&gt;</span><span class="si">#{</span><span class="n">context</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&lt;/title&gt;&quot;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;/head&gt;&#39;</span><span class="p">)</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;body&gt;&#39;</span><span class="p">)</span>
  <span class="n">context</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
    <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;  &lt;p&gt;</span><span class="si">#{</span><span class="n">line</span><span class="si">}</span><span class="s2">&lt;/p&gt;&quot;</span> <span class="p">)</span>
  <span class="k">end</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s1">&#39; &lt;/body&gt;&#39;</span><span class="p">)</span>
  <span class="nb">puts</span>

<span class="n">report</span> <span class="o">=</span> <span class="no">Report</span><span class="o">.</span><span class="n">new</span> <span class="o">&amp;</span><span class="no">HTML_FORMATTER</span>
<span class="n">report</span><span class="o">.</span><span class="n">output_report</span>
</code></pre></div>

<p><strong>Formateo de texto</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">report</span> <span class="o">=</span> <span class="no">Report</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">context</span><span class="o">|</span>
  <span class="nb">puts</span><span class="p">(</span><span class="s2">&quot;***** </span><span class="si">#{</span><span class="n">context</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> *****&quot;</span><span class="p">)</span>
  <span class="n">context</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
    <span class="nb">puts</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../iiss-fp-1/" title="Interfaces funcionales" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Interfaces funcionales
              </span>
            </div>
          </a>
        
        
          <a href="../iiss-fp-3/" title="Mixins" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mixins
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/dodero" target="_blank" rel="noopener" title="" class="md-footer-social__link fa fa-"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>